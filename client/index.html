<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; script-src 'self'; connect-src 'self' https://localhost:3347; object-src 'none'; frame-src 'none'; base-uri 'self'; form-action 'self'" />
    <title>BitPlay - Stream Torrents Inside the Browser</title>
    <meta name="description" content="BitPlay is a web-based torrent streaming application that allows you to stream torrents directly in your browser." />
    <link rel="icon" href="/static/assets/favicon.png" type="image/png" />
    <link href="/static/assets/video-js.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/assets/butterup.min.css" />
    <link rel="stylesheet" href="/dist/output.css" />
    <script>
      // Set theme mode
      const theme = localStorage.getItem("theme") || "light";
      document.documentElement.classList.add(theme);
    </script>
  </head>
  <body>
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 flex flex-col items-center">
      <div class="flex justify-between w-full gap-4 mb-8 md:mb-15">
        <div class="flex items-center gap-3">
          <img src="/static/assets/bitplay_logo.png" alt="BitPlay logo" class="h-12 w-auto" />
          <span class="text-[24px] font-semibold">BitPlay</span>
        </div>
        <div class="flex items-center gap-4">
          <button
            class="inline-flex items-center cursor-pointer justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 size-10"
            type="button"
            id="toggle_theme"
            aria-label="Toggle theme"
          >
            <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon w-4 h-4">
              <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
            </svg>
          </button>
          <button
            class="inline-flex h-10 px-3 items-center cursor-pointer justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50"
            type="button"
            id="settings-btn"
            aria-label="Open settings"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-settings2 w-4 h-4"
            >
              <path d="M20 7h-9"></path>
              <path d="M14 17H5"></path>
              <circle cx="17" cy="17" r="3"></circle>
              <circle cx="7" cy="7" r="3"></circle>
            </svg>
            Settings
          </button>
        </div>
      </div>
      <h1
        class="mb-8 text-3xl leading-[1.2] md:text-5xl max-w-xl text-center font-semibold bg-gradient-to-r from-primary to-[#00CCFF] text-transparent bg-clip-text"
      >
        Stream torrents with ease
      </h1>
      <div id="search-wrapper" class="hidden w-full">
        <form id="search-form" class="w-full flex items-center gap-3">
          <input
            class="file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive h-12 overflow-ellipsis overflow-hidden"
            placeholder="Search for torrents..."
            id="search"
            name="search"
            type="search"
            aria-label="Search for torrents"
            autocomplete="off"
          />
          <button class="btn" type="submit" aria-label="Search">Search</button>
        </form>
        <div
          id="search-result"
          class="mt-4 border rounded-lg overflow-auto max-h-[500px] bg-accent/50 hidden"
        >
          <table class="w-full caption-bottom text-sm" aria-label="Search results">
            <thead>
              <tr class="bg-muted text-muted-foreground border-b">
                <th class="p-3 text-left" scope="col">Name</th>
                <th class="p-3 text-left" scope="col">Indexer</th>
                <th class="p-3 text-left" scope="col">Size</th>
                <th class="p-3 text-left" scope="col">Seeders</th>
                <th class="p-3 text-left w-[10px]" scope="col">Actions</th>
              </tr>
            </thead>
            <tbody
              id="search-result-body"
              class="divide-y [&_td]:px-3 [&_td]:py-2 [&_td]:whitespace-nowrap [&_td]:max-w-[200px] [&_td]:overflow-hidden [&_td]:text-ellipsis"
            >
              <tr>
                <td colspan="5" class="py-10 px-6 text-center">
                  No results found
                </td>
              </tr>
            </tbody>
            <tfoot class="hidden">
              <tr>
                <td colspan="5" class="py-10 px-6 text-center">
                  No results found
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
        <div id="search-pagination" class="hidden mt-4"></div>
        <div
          class="w-full my-4 text-center text-sm font-semibold text-accent-foreground"
        >
          OR
        </div>
      </div>
      <form id="torrent-form" class="w-full flex items-center gap-3">
        <div class="relative w-full">
          <input
            class="file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive h-12 pr-12 overflow-ellipsis overflow-hidden"
            placeholder="Magnet link"
            id="magnet"
            name="magnet"
            aria-label="Enter magnet link"
            autocomplete="off"
          />
          <button
            id="copy_magnet"
            class="inline-flex items-center cursor-pointer justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-10 absolute right-0 top-0 h-full w-12"
            type="button"
            aria-label="Copy magnet link"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-clipboard-paste size-5"
            >
              <path
                d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"
              ></path>
              <path
